<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIP - Proyecto Individual</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="/Feed_Proyectos.css">
  <style>
    /* ESTILOS ORIGINALES - MANTENER */
    .proyecto-acciones {
        display: flex;
        gap: 8px;
        margin-left: auto;
    }

    .btn-editar, .btn-eliminar {
        background: none;
        border: none;
        cursor: pointer;
        padding: 6px;
        border-radius: 4px;
        font-size: 14px;
        transition: all 0.3s ease;
    }

    .btn-editar {
        color: #3ec9a7;
    }

    .btn-editar:hover {
        background-color: #e8f8f4;
        transform: scale(1.1);
    }

    .btn-eliminar {
        color: #e53e3e;
    }

    .btn-eliminar:hover {
        background-color: #fde8e8;
        transform: scale(1.1);
    }

    /* ESTILOS PARA EL MENÚ DE 3 PUNTOS - AGREGAR */
    .proyecto-acciones {
        position: relative;
    }

    .menu-tres-puntos {
        background: none;
        border: none;
        cursor: pointer;
        padding: 6px;
        border-radius: 4px;
        font-size: 16px;
        color: #666;
        transition: all 0.3s ease;
    }

    .menu-tres-puntos:hover {
        background-color: #f0f0f0;
        transform: scale(1.1);
    }

    .menu-desplegable {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        padding: 8px 0;
        min-width: 120px;
        z-index: 100;
        display: none;
    }

    .menu-desplegable.mostrar {
        display: block;
    }

    .menu-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: none;
        border: none;
        width: 100%;
        text-align: left;
        cursor: pointer;
        font-size: 14px;
        color: #333;
        transition: background-color 0.2s;
    }

    .menu-item:hover {
        background-color: #f5f5f5;
    }

    .menu-item.editar {
        color: #3ec9a7;
    }

    .menu-item.eliminar {
        color: #e53e3e;
    }

    .menu-item i {
        font-size: 14px;
        width: 16px;
    }
  </style>
</head>
<body>
  <div class="main-container">
    <!-- Header -->
    <header class="header">
      <img src="/img/logo.png" alt="SIP Logo" class="logo-header">
      <nav class="nav-header">
        <a href="/feed-proyectos"><i class="fa-solid fa-layer-group"></i> Proyectos</a>
        <a href="#" id="notificaciones-btn"><i class="fa-regular fa-bell"></i> Notificaciones</a>
        <div class="user-info" id="perfil-btn">
          <span class="user-avatar">D</span>
          <span class="user-name">Daniela</span>
        </div>
      </nav>
      <!-- Notificaciones Popover -->
    <div id="notificaciones-popover" class="notificaciones-popover">
      <div class="notificaciones-arrow"></div>
      <h3>Notificaciones</h3>
      <div class="notificacion-item">
        <span class="notif-avatar">A</span>
        <div>
          <strong>Respondió tu publicación</strong>
          <div class="notif-text">Te dare varias ideas para tu proyecto...</div>
        </div>
      </div>
      <div class="notificacion-item">
        <span class="notif-avatar">J</span>
        <div>
          <strong>Respondió tu publicación</strong>
          <div class="notif-text">Te dare varias ideas para tu proyecto...</div>
        </div>
      </div>
      <div class="notificacion-item">
        <span class="notif-avatar">D</span>
        <div>
          <strong>Respondió tu respuesta</strong>
          <div class="notif-text">Muchas gracias me sirvió mucho, sig...</div>
        </div>
      </div>
    </div>
    </header>

    <!-- MODAL SUBIR PROYECTO -->
    <div id="modal-subir-proyecto" class="modal-publicacion" style="display:none;">
      <div class="modal-content">
        <h2>Subir Proyecto</h2>
        <form id="form-subir-proyecto" enctype="multipart/form-data">
          <input type="hidden" name="user_id" id="user_id">
          
          <input type="text" name="titulo" placeholder="Título..." required />
          <textarea name="descripcion" placeholder="Ingrese la descripción..." required></textarea>
          
          <!-- SELECT DE PROGRAMA -->
          <select name="programa" required style="width:100%; padding:12px; margin-bottom:18px; border:1.5px solid #3ec9a7; border-radius:12px;">
            <option value="">Selecciona tu programa</option>
            <option value="Desarrollo de Software">Tecnología en Desarrollo de Software</option>
            <option value="Redes y Telecomunicaciones">Redes y Telecomunicaciones</option>
          </select>
          
          <div style="margin-bottom:10px; text-align:left; color:#444; font-weight:500;">Agrega maximo 5 imagenes...</div>
          <input type="file" name="imagenes" accept="image/*" multiple style="margin-bottom:10px;">
          
          <div style="margin-bottom:10px; text-align:left; color:#444; font-weight:500;">
            Agrega documentación (PDF)...
          </div>
          <input type="file" name="documento_pdf" id="pdf-doc" accept="application/pdf" style="display:none;">
          <label for="pdf-doc" class="pdf-label">Seleccionar PDF</label>
          <span id="pdf-name"></span>
          <div id="pdf-preview" style="margin-bottom:10px;"></div>
          
          <div style="margin-bottom:10px; text-align:left; color:#444; font-weight:500;">Agrega enlace de Github (Codigo)...</div>
          <input type="url" name="github_url" placeholder="https://github.com/usuario/proyecto" />
          
          <div class="modal-btns">
            <button type="submit" id="btn-publicar" class="btn-modal">Publicar</button>
            <button type="button" id="btn-cancelar" class="btn-modal cancelar">Cancelar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- MODAL EDITAR PROYECTO -->
    <div id="modal-editar-proyecto" class="modal-publicacion" style="display:none;">
      <div class="modal-content">
        <h2>Editar Proyecto</h2>
        <form id="form-editar-proyecto" enctype="multipart/form-data">
          <input type="hidden" name="user_id" id="edit_user_id">
          <input type="hidden" name="proyecto_id" id="edit_proyecto_id">
          
          <input type="text" name="titulo" id="edit_titulo" placeholder="Título..." required />
          <textarea name="descripcion" id="edit_descripcion" placeholder="Ingrese la descripción..." required></textarea>
          
          <!-- SELECT DE PROGRAMA -->
          <select name="programa" id="edit_programa" required style="width:100%; padding:12px; margin-bottom:18px; border:1.5px solid #3ec9a7; border-radius:12px;">
            <option value="">Selecciona tu programa</option>
            <option value="Desarrollo de Software">Tecnología en Desarrollo de Software</option>
            <option value="Redes y Telecomunicaciones">Redes y Telecomunicaciones</option>
          </select>
          
          <div style="margin-bottom:10px; text-align:left; color:#444; font-weight:500;">Agrega maximo 5 imagenes...</div>
          <input type="file" name="imagenes" id="edit_imagenes" accept="image/*" multiple style="margin-bottom:10px;">
          <div id="edit_imagenes_actuales" style="margin-bottom:10px;"></div>
          
          <div style="margin-bottom:10px; text-align:left; color:#444; font-weight:500;">
            Agrega documentación (PDF)...
          </div>
          <input type="file" name="documento_pdf" id="edit_pdf-doc" accept="application/pdf" style="display:none;">
          <label for="edit_pdf-doc" class="pdf-label">Seleccionar PDF</label>
          <span id="edit_pdf-name"></span>
          <div id="edit_pdf-preview" style="margin-bottom:10px;"></div>
          <div id="edit_pdf_actual" style="margin-bottom:10px;"></div>
          
          <div style="margin-bottom:10px; text-align:left; color:#444; font-weight:500;">Agrega enlace de Github (Codigo)...</div>
          <input type="url" name="github_url" id="edit_github_url" placeholder="https://github.com/usuario/proyecto" />
          
          <div class="modal-btns">
            <button type="submit" id="btn-actualizar" class="btn-modal">Actualizar</button>
            <button type="button" id="btn-cancelar-edicion" class="btn-modal cancelar">Cancelar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Menú Popover de Usuario -->
    <div id="popover-menu" class="popover-menu">
      <div class="popover-arrow"></div>
      <div class="popover-content">
        <ul class="popover-list">
          <li>
            <span class="icon">
              <i class="fa-regular fa-user"></i>
            </span>
            <span>Perfil</span>
          </li>
          <li>
            <span class="icon">
              <i class="fa-solid fa-gear"></i>
            </span>
            <span>Configuración</span>
          </li>
          <li>
            <span class="icon">
              <i class="fa-regular fa-star"></i>
            </span>
            <span>Favoritos</span>
          </li>
          <li>
            <span class="icon">
              <i class="fa-regular fa-circle-question"></i>
            </span>
            <span>Ayuda</span>
          </li>
        </ul>
        <form action="/api/logout" method="POST" id="logoutForm">
          <input type="hidden" name="user_id" id="user_id">>
          <button type="submit" class="logout-btn" id="logoutBtn">Cerrar sesión</button>
        </form>
      </div>
    </div>

    <main class="proyectos-main">
      <!-- Panel de filtros -->
      <aside class="filtros">
        <button class="btn-subir" type="button">Subir proyecto</button>
        <form class="filtros-form" action="/api/proyectos/buscar" method="GET" id="form-filtros">
          <input type="text" name="keyword" placeholder="Buscar por palabra clave...">
          <select name="programa">
            <option value="">Todos los programas</option>
            <option value="software">Desarrollo de Software</option>
            <option value="redes">Redes y Telecomunicaciones</option>
          </select>
          <select name="rol">
            <option value="">Todos los roles</option>
            <option value="aprendiz">Aprendiz</option>
            <option value="egresado">Egresado</option>
            <option value="instructor">Instructor</option>
          </select>
          <input type="date" name="fecha" placeholder="dd/mm/aaaa">
          <button type="submit" style="display:none;">Buscar</button>
        </form>
        <button class="btn-limpiar" type="button">Limpiar Filtros</button>
      </aside>

      <!-- Lista de proyectos -->
      <section class="proyectos-lista" id="proyectos-lista">
        <!-- Los proyectos se cargarán dinámicamente aquí -->
      </section>
    </main>

    

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <hr class="footer-line">
        <div class="footer-icons">
          <i class="fab fa-twitter"></i>
          <i class="fab fa-facebook"></i>
          <i class="fab fa-instagram"></i>
        </div>
        <hr class="footer-line">
      </div>
      <div class="footer-text">
        Copyright © 2025 SENA INTERACTIVE PORTAL
      </div>
      <div class="footer-links">
        <span>Información legal</span>
        <span>Política de privacidad</span>
      </div>
    </footer>
  </div>

<script src="/JS/feed-proyectos.js"></script>
</body>
</html>