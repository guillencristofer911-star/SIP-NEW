<!-- Pages/cambiar-correo.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cambiar correo</title>
</head>
<body>
  <h2>Cambiar correo electr√≥nico</h2>
  <form id="form-cambiar-correo">
    <label>Correo actual:</label>
    <input type="email" id="correoActual" required><br><br>

    <label>Nuevo correo:</label>
    <input type="email" id="nuevoCorreo" required><br><br>

    <button type="submit">Guardar cambios</button>
  </form>

  <p id="mensaje"></p>

  <script>
    document.getElementById("form-cambiar-correo").addEventListener("submit", async (e) => {
      e.preventDefault();
      const token = localStorage.getItem("token"); // Asumiendo que se guarda al hacer login

      const data = {
        correoActual: document.getElementById("correoActual").value,
        nuevoCorreo: document.getElementById("nuevoCorreo").value,
      };

      const res = await fetch("/api/cambiar-correo", {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${token}`,
        },
        body: JSON.stringify(data),
      });

      const json = await res.json();
      document.getElementById("mensaje").innerText = json.message;
    });
  </script>
</body>
</html>
